(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"9Jkg":function(e,t,n){e.exports=n("oh+g")},RNiq:function(e,t,n){"use strict";n.r(t);var o=n("9Jkg"),r=n.n(o),l=n("ln6h"),i=n.n(l),a=n("O40h"),s=n("0iUn"),c=n("sLSF"),h=n("MI3g"),p=n("a7VT"),u=n("AT/M"),f=n("Tit0"),d=n("hfKm"),v=n.n(d);function g(e,t,n){return t in e?v()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("q1tI"),y=n.n(m),w=(n("YFqc"),n("PgRs")),b=n.n(w);n.d(t,"default",function(){return _});var k="metanear",O=function(e){function t(){var e,n;Object(s.default)(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return n=Object(h.default)(this,(e=Object(p.default)(t)).call.apply(e,[this].concat(r))),g(Object(u.default)(n),"onMouseMove",function(e){n.props.onHighlight(Math.floor(e.offsetX/n.props.cellWidth),Math.floor(e.offsetY/n.props.cellHeight))}),n}return Object(f.default)(t,e),Object(c.default)(t,[{key:"componentDidMount",value:function(){for(var e=this.refs.canvas.getContext("2d"),t=0;t<this.props.width/this.props.cellWidth;++t)e.beginPath(),e.moveTo(t*this.props.cellWidth,0),e.lineTo(t*this.props.cellWidth,this.props.height),e.stroke();for(var n=0;n<this.props.height/this.props.cellHeight;++n)e.beginPath(),e.moveTo(0,n*this.props.cellHeight),e.lineTo(this.props.width,n*this.props.cellHeight),e.stroke();for(var o=0;o<this.props.cells.length;++o)e.fillRect(this.props.cells[o].location.x*this.props.cellWidth,this.props.cells[o].location.y*this.props.cellHeight,this.props.cellWidth,this.props.cellHeight);e.beginPath(),e.arc((this.props.playerX+.5)*this.props.cellWidth,(this.props.playerY+.5)*this.props.cellHeight,this.props.cellWidth/2-3,0,2*Math.PI),e.stroke(),document.addEventListener("mousemove",this.onMouseMove,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onMouseMove,!1)}},{key:"render",value:function(){return y.a.createElement("canvas",{ref:"canvas",width:this.props.width,height:this.props.height})}}]),t}(y.a.Component),E=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(h.default)(this,Object(p.default)(t).call(this,e)),g(Object(u.default)(n),"nearConnect",Object(a.default)(i.a.mark(function e(){var t,o,r,l,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new nearlib.WalletAccount(k,"https://wallet.nearprotocol.com/"),o=t.getAccountId(),console.log(o),r=new nearlib.Near(new nearlib.NearClient(t,new nearlib.LocalNodeConnection("https://studio.nearprotocol.com/devnet"))),e.next=6,r.loadContract(k,{viewMethods:["lookAround","getPlayer"],changeMethods:[],sender:o});case 6:return n.contract=e.sent,e.next=9,n.contract.lookAround();case 9:return l=e.sent,console.log(l),e.next=13,n.contract.getPlayer({accountId:n.props.accountId});case 13:a=e.sent,console.log(a),n.setState({cells:l.cells||[],player:a});case 16:case"end":return e.stop()}},e)}))),g(Object(u.default)(n),"onHighlight",function(e,t){for(var o={},r=0;r<n.state.cells.length;++r)if(n.state.cells[r].location.x==e&&n.state.cells[r].location.y==t){o=n.state.cells[r];break}n.setState({highlighCell:o})}),n.state={cells:[{location:{x:1,y:1},viewIndex:1,contractId:"ads",webUrl:"123",owner:"xyz"}],highlighCell:{},player:{location:{x:0,y:0}}},n}return Object(f.default)(t,e),Object(c.default)(t,[{key:"componentDidMount",value:function(){this.nearConnect()}},{key:"render",value:function(){return y.a.createElement("div",null,y.a.createElement(O,{width:640,height:425,cellWidth:20,cellHeight:20,cells:this.state.cells,onHighlight:this.onHighlight,playerX:this.state.player.location.x,playerY:this.state.player.location.y}),y.a.createElement("div",null,r()(this.state.highlighCell)))}}]),t}(y.a.Component);function _(){return y.a.createElement("div",null,y.a.createElement(b.a,null,y.a.createElement("script",{src:"https://cdn.jsdelivr.net/npm/nearlib@0.4.2/dist/nearlib.js"})),y.a.createElement("div",null,y.a.createElement(E,{accountId:"illia.near"})))}},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var o=n("KI45"),r=o(n("9Jkg")),l=o(n("iZP3")),i=o(n("/HRN")),a=o(n("WaGi")),s=o(n("ZDA2")),c=o(n("/+P4")),h=o(n("N9n2")),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},u=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=n("CxY0"),d=p(n("q1tI")),v=(u(n("17x9")),p(n("20a2"))),g=n("Bu4q");var m=function(e){function t(){var e,n,o,r,a;return(0,i.default)(this,t),(e=(0,s.default)(this,(0,c.default)(t).apply(this,arguments))).formatUrls=(n=function(e,t){return{href:e&&"object"===(0,l.default)(e)?g.formatWithValidation(e):e,as:t&&"object"===(0,l.default)(t)?g.formatWithValidation(t):t}},o=null,r=null,a=null,function(e,t){if(e===o&&t===r)return a;var l=n(e,t);return o=e,r=t,a=l,l}),e.linkClicked=function(t){var n=t.currentTarget,o=n.nodeName,r=n.target;if("A"!==o||!(r&&"_self"!==r||t.metaKey||t.ctrlKey||t.shiftKey||t.nativeEvent&&2===t.nativeEvent.which)){var l=e.formatUrls(e.props.href,e.props.as),i=l.href,a=l.as;if(function(e){var t=f.parse(e,!1,!0),n=f.parse(g.getLocationOrigin(),!1,!0);return!t.host||t.protocol===n.protocol&&t.host===n.host}(i)){var s=window.location.pathname;i=f.resolve(s,i),a=a?f.resolve(s,a):i,t.preventDefault();var c=e.props.scroll;null==c&&(c=a.indexOf("#")<0),v.default[e.props.replace?"replace":"push"](i,a,{shallow:e.props.shallow}).then(function(e){e&&c&&(window.scrollTo(0,0),document.body.focus())}).catch(function(t){e.props.onError&&e.props.onError(t)})}}},e}return(0,h.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){this.prefetch()}},{key:"componentDidUpdate",value:function(e){(0,r.default)(this.props.href)!==(0,r.default)(e.href)&&this.prefetch()}},{key:"prefetch",value:function(){if(this.props.prefetch&&"undefined"!=typeof window){var e=window.location.pathname,t=this.formatUrls(this.props.href,this.props.as).href,n=f.resolve(e,t);v.default.prefetch(n)}}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.formatUrls(this.props.href,this.props.as),o=n.href,r=n.as;"string"==typeof t&&(t=d.default.createElement("a",null,t));var l=d.Children.only(t),i={onClick:function(t){l.props&&"function"==typeof l.props.onClick&&l.props.onClick(t),t.defaultPrevented||e.linkClicked(t)}};return!this.props.passHref&&("a"!==l.type||"href"in l.props)||(i.href=r||o),i.href&&"undefined"!=typeof __NEXT_DATA__&&__NEXT_DATA__.nextExport&&(i.href=v.Router._rewriteUrlForNextExport(i.href)),d.default.cloneElement(l,i)}}]),t}(d.Component);t.default=m},"oh+g":function(e,t,n){var o=n("WEpk"),r=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){var e=n("RNiq");return{page:e.default||e}}])}},[["vlRD",1,0]]]);